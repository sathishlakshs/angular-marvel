(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{hdGe:function(t,i,e){"use strict";e.r(i),e.d(i,"CharactersModule",(function(){return A}));var n=e("ofXK"),o=e("3T0w"),l=e("fXoL"),r=e("mrSG"),s=e("AytR"),c=e("0e6G"),a=e("NiIz"),h=e("F5nt");let u=(()=>{class t{constructor(t,i){this.api=t,this.appService=i,this.today=new Date,this.count=0,this.list=[],this.getCharacters=(t,i)=>Object(r.a)(this,void 0,void 0,(function*(){var e;let n=`ts=${this.appService.getTimeStamp(this.today)}&apikey=${s.a.publickey}&hash=${this.appService.getMd5ConvertedToken(this.today)}`;n+=`&limit=${t}&orderBy=-modified&offset=${i}`;const o=yield this.api.fetchCharacters(n).toPromise();(null===(e=null==o?void 0:o.data)||void 0===e?void 0:e.results)&&o.data.results.length>0&&(this.list=[...this.list,...this.appService.manipulateResData(o.data.results,c.a.CHARACTERS)],this.count=o.data.total)}))}}return t.\u0275fac=function(i){return new(i||t)(l.Ub(a.a),l.Ub(h.a))},t.\u0275prov=l.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=e("LRne"),f=e("xgIS"),p=e("5+tZ"),g=e("lJxs"),b=e("vkgz"),S=e("pLZG"),w=e("7o/Q"),m=e("D0XW");e("l7GE"),e("ZUHj");const y={leading:!0,trailing:!1};class T{constructor(t,i,e,n){this.duration=t,this.scheduler=i,this.leading=e,this.trailing=n}call(t,i){return i.subscribe(new v(t,this.duration,this.scheduler,this.leading,this.trailing))}}class v extends w.a{constructor(t,i,e,n,o){super(t),this.duration=i,this.scheduler=e,this.leading=n,this.trailing=o,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(D,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function D(t){const{subscriber:i}=t;i.clearThrottle()}function O(t,i,e,n){const o=window&&!!window.document&&window.document.documentElement;let l=o&&i?window:e;if(t&&(l=t&&o&&"string"==typeof t?function(t,i,e){return(e?window.document:i).querySelector(t)}(t,e.nativeElement,n):t,!l))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return l}function C(t){return t&&!t.firstChange}const H={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},x={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class z{constructor(t=!0){this.vertical=t,this.propsMap=t?H:x}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function K(t){return["Window","global"].some(i=>Object.prototype.toString.call(t).includes(i))}function I(t,i){return t?i.document.documentElement:null}function U(t,i){const e=function({container:t,isWindow:i,axis:e}){const{offsetHeightKey:n,clientHeightKey:o}=W(e);return P(t,i,n,o)}(i);return i.isWindow?function(t,i,e){const{axis:n,container:o,isWindow:l}=e,{offsetHeightKey:r,clientHeightKey:s}=W(n),c=t+E(I(l,o),n,l),a=P(i.nativeElement,l,r,s);return{height:t,scrolled:c,totalToScroll:function(t,i,e){const n=i.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[n]+E(t,i,e)}(i.nativeElement,n,l)+a,isWindow:l}}(e,t,i):function(t,i,e){const{axis:n,container:o}=e;return{height:t,scrolled:o[n.scrollTopKey()],totalToScroll:o[n.scrollHeightKey()],isWindow:!1}}(e,0,i)}function W(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function P(t,i,e,n){if(isNaN(t[e])){const e=I(i,t);return e?e[n]:0}return t[e]}function E(t,i,e){const n=i.pageYOffsetKey(),o=i.scrollTopKey(),l=i.offsetTopKey();return isNaN(window.pageYOffset)?I(e,t)[o]:t.ownerDocument?t.ownerDocument.defaultView[n]:t[l]}function j(t,i,e){let n,o;if(t.totalToScroll<=0)return!1;const l=t.isWindow?t.scrolled:t.height+t.scrolled;return e?(n=(t.totalToScroll-l)/t.totalToScroll,o=i.down/10):(n=t.scrolled/(t.scrolled+(t.totalToScroll-l)),o=i.up/10),n<=o}class _{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,i){this.updateScrollPosition(t),this.updateTotalToScroll(i)}updateTriggeredFlag(t,i){i?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,i){return i?this.triggered.down===t:this.triggered.up===t}}function k(t){const{scrollDown:i,stats:{scrolled:e}}=t;return{type:i?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:e}}}let N=(()=>{class t{constructor(t,i){this.element=t,this.zone=i,this.scrolled=new l.n,this.scrolledUp=new l.n,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:i,infiniteScrollDistance:e}){const n=C(t),o=C(i),l=C(e),r=!o&&!this.infiniteScrollDisabled||o&&!i.currentValue||l;(n||o||l)&&(this.destroyScroller(),r&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:i,scrollWindow:e,element:n,fromRoot:o}=t,l=function({windowElement:t,axis:i}){return function(t,i){const e=t.isWindow||i&&!i.nativeElement?i:i.nativeElement;return Object.assign(Object.assign({},t),{container:e})}({axis:i,isWindow:K(t)},t)}({axis:new z(!t.horizontal),windowElement:O(i,e,n,o)}),r=new _({totalToScroll:U(n,l)}),s={up:t.upDistance,down:t.downDistance};return function(t){let i=Object(f.a)(t.container,"scroll");return t.throttle&&(i=i.pipe(function(t,i=m.a,e=y){return n=>n.lift(new T(t,i,e.leading,e.trailing))}(t.throttle))),i}({container:l.container,throttle:t.throttle}).pipe(Object(p.a)(()=>Object(d.a)(U(n,l))),Object(g.a)(t=>function(t,i,e){const{scrollDown:n,fire:o}=function(t,i,e){const n=function(t,i){return t<i.scrolled}(t,i);return{fire:j(i,e,n),scrollDown:n}}(t,i,e);return{scrollDown:n,fire:o,stats:i}}(r.lastScrollPosition,t,s)),Object(b.a)(({stats:t})=>r.updateScroll(t.scrolled,t.totalToScroll)),Object(S.a)(({fire:i,scrollDown:e,stats:{totalToScroll:n}})=>function(t,i,e){return!(!t||!i)||!(e||!i)}(t.alwaysCallback,i,r.isTriggeredScroll(n,e))),Object(b.a)(({scrollDown:t,stats:{totalToScroll:i}})=>{r.updateTriggeredFlag(i,t)}),Object(g.a)(k))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:i}){switch(t){case"[NGX_ISE] DOWN":return this.scrolled.emit(i);case"[NGX_ISE] UP":return this.scrolledUp.emit(i);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(l.Lb(l.l),l.Lb(l.z))},t.\u0275dir=l.Gb({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[l.xb]}),t})(),V=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(i){return new(i||t)},providers:[],imports:[[]]}),t})();var R=e("RIfK");function M(t,i){if(1&t&&(l.Ob(0),l.Qb(1,"div",9),l.Mb(2,"app-poster",10),l.Pb(),l.Nb()),2&t){const t=i.$implicit;l.zb(2),l.gc("imagePath",t.imagePath)("data",t)}}function G(t,i){if(1&t&&(l.Ob(0),l.xc(1,M,3,2,"ng-container",8),l.Nb()),2&t){const t=l.bc();l.zb(1),l.gc("ngForOf",t.service.list)}}function L(t,i){if(1&t&&(l.Ob(0),l.Mb(1,"app-poster",10),l.Nb()),2&t){const t=l.bc(2);l.zb(1),l.gc("imagePath","https://react-marvel-poc.fidisys.com/static/media/img-placeholder.8c8590c4.svg")("data",t.item)}}function X(t,i){if(1&t&&l.xc(0,L,2,2,"ng-container",8),2&t){const t=l.bc();l.gc("ngForOf",t.appService.arrayIterate(40))}}let F=(()=>{class t{constructor(t,i){this.service=t,this.appService=i,this.title=o.a[0].label,this.pageSize=40,this.pageIndex=0,this.throttle=200,this.scrollDistance=1,this.scrollUpDistance=2,this.direction="",this.onScrollDown=()=>{this.pageSize=60,this.pageIndex+=1,this.service.getCharacters(this.pageSize,this.pageIndex),this.direction="down"},this.onUp=()=>{this.direction="up"}}ngOnInit(){this.service.getCharacters(this.pageSize,this.pageIndex)}}return t.\u0275fac=function(i){return new(i||t)(l.Lb(u),l.Lb(h.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-characters"]],decls:10,vars:7,consts:[[1,"wrapper"],[1,"relative","h47","cardTitleContainer","mb20"],[1,"blueLine"],[1,"cardTitle"],["infinite-scroll","",3,"infiniteScrollDistance","infiniteScrollUpDistance","infiniteScrollThrottle","scrolled","scrolledUp"],[1,"flex","flow-wrap","justify-even","mt30"],[4,"ngIf","ngIfElse"],["imgloader",""],[4,"ngFor","ngForOf"],[1,"mb30"],[3,"imagePath","data"]],template:function(t,i){if(1&t&&(l.Qb(0,"div",0),l.Qb(1,"div",1),l.Mb(2,"div",2),l.Qb(3,"div",3),l.zc(4),l.Pb(),l.Pb(),l.Qb(5,"div",4),l.Xb("scrolled",(function(){return i.onScrollDown()}))("scrolledUp",(function(){return i.onUp()})),l.Qb(6,"div",5),l.xc(7,G,2,1,"ng-container",6),l.xc(8,X,1,1,"ng-template",null,7,l.yc),l.Pb(),l.Pb(),l.Pb()),2&t){const t=l.mc(9);l.zb(4),l.Cc("",i.title," (",i.service.count,")"),l.zb(1),l.gc("infiniteScrollDistance",i.scrollDistance)("infiniteScrollUpDistance",i.scrollUpDistance)("infiniteScrollThrottle",i.throttle),l.zb(2),l.gc("ngIf",i.service.list.length>0)("ngIfElse",t)}},directives:[N,n.k,n.j,R.a],styles:[""]}),t})();var Q=e("tyNb");const Y=[{path:"",component:F}];let J=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(i){return new(i||t)},imports:[[Q.e.forChild(Y),n.b],Q.e]}),t})();var $=e("PCNd");let A=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(i){return new(i||t)},imports:[[n.b,J,$.a,V]]}),t})()}}]);